<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saint Esprit - Syst√®me de Newsroom v2.1.1</title>

    <!-- Cognito Auth inline -->
    <script>
        // Configuration Cognito pour le bouton de d√©connexion
        const cognitoConfig = {
            domain: 'saint-esprit-radio-auth.auth.eu-west-3.amazoncognito.com',
            clientId: '5jst6bnhl26ekdr5a7pu9ik2f5',
            redirectUri: window.location.origin + '/',
            logoutUri: window.location.origin + '/logout.html',
            region: 'eu-west-3'
        };

        // Fonction de d√©connexion
        window.cognitoLogout = function() {
            localStorage.removeItem('saint-esprit-authenticated');
            localStorage.removeItem('saint-esprit-auth-code');
            localStorage.removeItem('saint-esprit-user');
            localStorage.removeItem('cognito_id_token');
            localStorage.removeItem('cognito_access_token');
            localStorage.removeItem('cognito_refresh_token');
            const logoutUrl = `https://${cognitoConfig.domain}/logout?` +
                `client_id=${cognitoConfig.clientId}&` +
                `logout_uri=${encodeURIComponent(cognitoConfig.logoutUri)}`;
            window.location.href = logoutUrl;
        }

        // Ne plus intercepter le code OAuth - laisser cognito-auth.js g√©rer tout
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="css/core/reset-v3.css">
    <link rel="stylesheet" href="css/core/utilities.css">
    <link rel="stylesheet" href="css/layout-v2.css?v=1762171000">
    <link rel="stylesheet" href="css/components/buttons.css">
    <link rel="stylesheet" href="css/components/forms.css">
    <link rel="stylesheet" href="css/components/modals.css">
    <link rel="stylesheet" href="css/components/tables.css">
    <link rel="stylesheet" href="css/components/sidebar-force.css?v=1762170000">
    <link rel="stylesheet" href="css/sections/dashboard.css">
    <link rel="stylesheet" href="css/sections/news.css">
    <link rel="stylesheet" href="css/sections/blocks.css">
    <link rel="stylesheet" href="css/sections/animation.css">
    <link rel="stylesheet" href="css/sections/conductor.css">
    <link rel="stylesheet" href="css/theme-white-override.css?v=2.0">

    <!-- V3 Design System - DOIT √äTRE EN DERNIER pour avoir la priorit√© -->
    <link rel="stylesheet" href="css/v3-design.css?v=1.1">
</head>
<body data-current-tab="dashboard">

    <!-- ==================================
         SIDEBAR NAVIGATION (Dashboard only)
         ================================== -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <img src="logo-saint-esprit-clair.png" alt="Saint-Esprit" class="logo-expanded" style="height: 90px; width: auto;">
            <img src="logo-saint-esprit-clair-icon-hd.png" alt="Saint-Esprit" class="logo-collapsed" style="height: 45px; width: auto;">
        </div>

        <div class="nav-container">
            <div class="nav-section">
                <div class="nav-section-title">Accueil</div>
                <button class="nav-item active" data-tab="dashboard">
                    <span class="nav-icon">üè†</span>
                    <span class="nav-text">Dashboard</span>
                    <span class="nav-shortcut">F1</span>
                </button>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">üìù Contenu</div>
                <button class="nav-item" data-tab="news">
                    <span class="nav-icon">üì∞</span>
                    <span class="nav-text">News</span>
                    <span class="nav-shortcut">F2</span>
                </button>
                <button class="nav-item" data-tab="blocks">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">Journaux</span>
                    <span class="nav-shortcut">F3</span>
                </button>
                <button class="nav-item" data-tab="animation">
                    <span class="nav-icon">üéôÔ∏è</span>
                    <span class="nav-text">Animation</span>
                    <span class="nav-shortcut">F4</span>
                </button>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">üì° Diffusion</div>
                <button class="nav-item" data-tab="conductor">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">Conducteur</span>
                    <span class="nav-shortcut">F9</span>
                </button>
                <button class="nav-item" data-tab="onair">
                    <span class="nav-icon">üî¥</span>
                    <span class="nav-text">ON AIR</span>
                    <span class="nav-shortcut">Shift+F9</span>
                </button>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Configuration</div>
                <button class="nav-item" data-tab="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Param√®tres</span>
                    <span class="nav-shortcut">F10</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- ==================================
         MAIN CONTENT
         ================================== -->
    <div class="main-content">

        <!-- HEADER -->
        <header class="header">
            <!-- Logo (visible hors dashboard) -->
            <div class="header-logo" onclick="app.switchTab('dashboard')">
                <img src="logo-saint-esprit-clair-icon-hd.png" alt="Saint-Esprit">
                <span class="header-logo-text">Saint-Esprit</span>
            </div>

            <!-- Navigation horizontale (visible hors dashboard) -->
            <nav class="header-nav">
                <button class="header-nav-item" data-tab="news" onclick="app.switchTab('news')">üì∞ News</button>
                <button class="header-nav-item" data-tab="blocks" onclick="app.switchTab('blocks')">üìã Journaux</button>
                <button class="header-nav-item" data-tab="animation" onclick="app.switchTab('animation')">üéôÔ∏è Animation</button>
                <button class="header-nav-item" data-tab="conductor" onclick="app.switchTab('conductor')">üìã Conducteur</button>
                <button class="header-nav-item" data-tab="onair" onclick="app.switchTab('onair')">üî¥ ON AIR</button>
                <button class="header-nav-item" data-tab="settings" onclick="app.switchTab('settings')">‚öôÔ∏è</button>
            </nav>

            <!-- Timer Display (visible sur dashboard) -->
            <div class="timer-display" id="main-timer-display">
                <div class="timer-item">
                    <div class="timer-label">TIME</div>
                    <div class="timer-value" id="current-time">00:00:00</div>
                </div>
            </div>

            <!-- Controls (toujours visible) -->
            <div class="header-controls">
                <span id="user-display"></span>
                <button class="quick-action logout" onclick="window.cognitoLogout()">üö™</button>
            </div>
        </header>

        <!-- MAIN CONTAINER (contenu scrollable) -->
        <div class="main-container">

            <!-- DASHBOARD SECTION -->
            <div id="dashboard-section" class="section active">
                <!-- Dashboard content injected by JS -->
            </div>

            <!-- NEWS SECTION -->
            <div id="news-section" class="section">
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <h2>Liste des News</h2>
                        <button class="btn btn-primary" onclick="app.newsManager.create()">+ Nouveau</button>
                    </div>
                    <input type="text" placeholder="Rechercher..." id="news-search">
                    <div id="news-list" class="news-list"></div>
                </aside>
                <main class="content-area">
                    <div class="welcome-screen">
                        <h2>Bienvenue dans la section News</h2>
                        <p>Cr√©ez et g√©rez vos actualit√©s</p>
                        <button class="btn btn-primary" onclick="app.newsManager.create()">üì∞ Cr√©er une News</button>
                    </div>
                    <div id="news-editor" class="editor-container hidden"></div>
                </main>
            </div>

            <!-- BLOCKS SECTION -->
            <div id="blocks-section" class="section">
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <h2>Liste des Journaux</h2>
                        <button class="btn btn-primary" onclick="app.blockManager.create()">+ Nouveau</button>
                    </div>
                    <input type="text" placeholder="Rechercher..." id="blocks-search">
                    <div id="blocks-list" class="blocks-list"></div>
                </aside>
                <main class="content-area">
                    <div class="welcome-screen">
                        <h2>Bienvenue dans la section Journaux</h2>
                        <p>Cr√©ez et g√©rez vos journaux</p>
                        <button class="btn btn-primary" onclick="app.blockManager.create()">üìã Cr√©er un Journal</button>
                    </div>
                    <div id="blocks-editor" class="editor-container hidden"></div>
                </main>
            </div>

            <!-- ANIMATION SECTION -->
            <div id="animation-section" class="section">
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <h2>Liste des Animations</h2>
                        <button class="btn btn-primary" onclick="app.animationManager.create()">+ Nouveau</button>
                    </div>
                    <input type="text" placeholder="Rechercher..." id="animation-search">
                    <div id="animation-list" class="animation-list"></div>
                </aside>
                <main class="content-area">
                    <div class="welcome-screen">
                        <h2>Bienvenue dans la section Animation</h2>
                        <p>Cr√©ez et g√©rez vos √©l√©ments d'animation</p>
                        <button class="btn btn-primary" onclick="app.animationManager.create()">üéôÔ∏è Cr√©er une Animation</button>
                    </div>
                    <div id="animation-editor" class="editor-container hidden"></div>
                </main>
            </div>

            <!-- CONDUCTOR SECTION -->
            <div id="conductor-section" class="section">
                <main class="content-area">
                    <!-- Conductor content will be injected here -->
                </main>
            </div>

            <!-- ON AIR SECTION -->
            <div id="onair-section" class="section">
                <main class="content-area">
                    <!-- On Air content will be injected here -->
                </main>
            </div>

            <!-- SETTINGS SECTION -->
            <div id="settings-section" class="section">
                <main class="content-area">
                    <!-- Settings content will be injected here -->
                </main>
            </div>

        </div>
    </div>

    <!-- Modal Container -->
    <div id="modal-container"></div>

    <!-- AWS SDK -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1462.0.min.js?v=1757350310"></script>

    <!-- Core Scripts -->
    <script src="js/config/aws-config.js?v=3.0.0"></script>
    <script src="js/core/utils.js?v=3.0.0"></script>
    <script src="js/utils/audio-url-fixer.js?v=3.0.0"></script>
    <script src="js/core/constants.js?v=3.0.0"></script>
    <script src="js/core/cognito-auth.js?v=1.2"></script>
    <script src="js/core/dynamodb-client.js?v=1762169381"></script>
    <script src="js/core/storage-dynamodb-v2.js?v=1762169381"></script>
    <script src="js/core/cache-manager.js?v=1762169381"></script>
    <script src="js/core/audio-storage.js?v=1762169381"></script>
    <script src="js/core/conductor-storage.js?v=1762169381"></script>
    <script src="js/core/sync-wrapper.js?v=1755899484"></script>
    <script src="js/core/cross-user-manager.js?v=1.2"></script>

    <!-- Utils -->
    <script src="js/utils/block-metrics.js?v=1.0"></script>

    <!-- Managers -->
    <script src="js/managers/ContentManagerHelpers.js?v=1755899484"></script>
    <script src="js/managers/ContentManager.js?v=1756486244"></script>
    <script src="js/managers/BlockManager.js?v=1756697800"></script>
    <script src="js/managers/ConductorManager.js?v=1756484402"></script>
    <script src="js/managers/ConductorTemplateManager.js?v=1755899484"></script>
    <script src="js/managers/AudioManager.js?v=1757260400"></script>
    <script src="js/managers/AudioS3Manager.js?v=1755899484"></script>
    <script src="js/managers/AudioUrlManager.js?v=1755899484"></script>
    <script src="js/managers/RecurrenceManager.js?v=1755899484"></script>
    <script src="js/managers/ExportManager.js?v=1755899484"></script>
    <script src="js/managers/ArchivesManager.js?v=1756492980"></script>

    <!-- Components -->
    <script src="js/components/Editor.js?v=1755899484"></script>
    <script src="js/components/Rundown.js?v=1755899484"></script>
    <script src="js/components/OnAir.js?v=1757350310"></script>
    <script src="js/components/Settings.js?v=1755899484"></script>
    <script src="js/components/Blocks.js?v=1755899484"></script>
    <script src="js/components/UserFilter.js?v=1.0"></script>
    <script src="js/components/ChroniquesInvites.js?v=1.0"></script>
    <script src="js/components/AudioEditor.js?v=1756417514"></script>
    <script src="js/components/MultitrackEditor.js?v=1755899484"></script>
    <script src="js/components/Fridge.js?v=1755899484"></script>
    <script src="js/components/NewsDurationManager.js?v=1.0"></script>

    <!-- Modules -->
    <script src="js/modules/StudiosCalendar.js?v=1.0"></script>
    <script src="js/modules/EmissionEditor.js?v=1.0"></script>
    <script src="js/modules/VolunteerOptimizations.js?v=1.0"></script>

    <!-- Dev Tools -->
    <script src="js/utils/dev-tools.js?v=1.0"></script>

    <!-- Main App -->
    <script src="js/app.js?v=1762169381"></script>
</body>
</html>
